Sun Jul 7 2015  Patrik Wenger  <paddor@gmail.com>
	* lock_box.h (lock_box): New header file.
	* open_box.h (open_box): New header file.

Sun Jul 5 2015  Patrik Wenger  <paddor@gmail.com>
	* lock_box.c (lock_box) <compute MAC>: Fix condition to find out if
	it's the first chunk. Use is_first_chunk instead of
	chunk_type!=FIRST_CHUNK.

Thu Jul 2 2015  Patrik Wenger  <paddor@gmail.com>
	* crypto_box.h (#include <stdbool.h>): Added.
	* crypto_box.h (struct ciphertext): Renamed to struct chunk.
	* crypto_box.h (FIRST_CHUNK, LAST_CHUNK): Macros defined.
	* crypto_box.h (INITIAL_CT_SIZE): Macros removed.
	* crypto_box.h (CT_AFTER_MAC): Macro renamed to CHUNK_CT.
	* crypto_box.h (other macros): Adapted/renamed to CHUNK_*.
	* crypto_box.h (init_ct): Renamed to init_chunk() along with
	definition. Callers changed.
	* crypto_box.h (grow_ct): Removed along with definition.
	* crypto_box.h (free_ct): Renamed to free_chunk() along with
	definiton. Callers changed.
	* crypto_box.h (sodium_increment): Declared.
	* crypto_box.c (init_ct): Renamed to init_chunk(). It malloc()s a
	fixed amount of memory now (CHUNK_CT_BYTES, 256 KiB).
	* crypto_box.c (grow_ct): Removed.
	* crypto_box.c (sodium_increment): Defined.
	* lock_box.c (lock_box): Changed to new chunking design (without MAC
	of MACs).
	* open_box.c (open_box): Changed to new chunking design (without MAC
	of MACs).

Sun Jun 30 2015  Patrik Wenger  <paddor@gmail.com>

	* crypto_box.h (struct arguments) <input_source, input_file>: Added.
	* crypto_box.c (options[]): Option -f/--file added.
	* crypto_box.c (parse_options) <case 'f', ARGP_KEY_SUCCESS>: Added.
	* crypto_box.c (get_key_from_args): Renamed to get_key_from_str().
	Parameter arg renamed to str.
	* crypto_box.c (read_line): Defined.
	* crypto_box.c (HEX_KEY_MAXLEN): Macro defined.
	* crypto_box.h (open_input, close_input): Declared.
	* crypto_box.c (open_input, close_input): Defined.
	* seal_box.c open_box.c (main):
	  - Initialize arguments.input_source.
	  - Use open_input() and close_input().

	* seal_box.c: Renamed to lock_box.c.

	* crypto_box.h (extern struct argp argp): Rename to argp_parser.
	Initialization and callers adapted.

	* crypto_box.h (struct arguments arguments): Declared.
	* crypto_box.c (struct arguments arguments): Initialized with default
	values.
	* lock_box.c open_box.c (main) <struct arguments arguments>: Removed
	local declaration.
	* crypto_box.c (parse_options) <case ARGP_KEY_SUCCESS>
	[key_source==CMD && key==NULL]: Inform about missing key argument and
	exit.

	* crypto_box.h (READ_BYTES): Macro removed.
	* crypto_box.h (CHUNK_BYTES): Macro defined.
	* lock_box.c (read_plaintext, encrypt_then_mac, write_ciphertext)
	(get_nonce): Removed.
	* open_box.c (read_ciphertext, verify_then_decrypt, write_plaintext):
	Removed.
	* lock_box.c (lock_box): Defined.
	* open_box.c (open_box): Defined.
	* lock_box.c open_box.c (main): Changed.

Sun Jun 29 2015  Patrik Wenger  <paddor@gmail.com>

	* crypto_box.h (ct_t): Remove typedef. Now it's struct ciphertext. *_t
	types are reserved for C standards. Declarations and definitions
	adapted.

Sun Jun 28 2015  Patrik Wenger  <paddor@gmail.com>

	* crypto_box.h (parse_options, get_key_from_file)
	    (get_key_from_args): Declarations removed.

	* crypto_box.c (get_key_from_args) [invalid]: Warn and abort.

	* crypto_box.h (key_mlock): Declared.
	* crypto_box.c (key_mlock, key_munlock): Defined.
	* seal_box.c open_box.c (main): Call key_mlock().

	* seal_box.c (write_ciphertext) [isatty]: Warn.

Fri Jun 26 2015  Patrik Wenger  <paddor@gmail.com>

	* crypto_box.h (struct arguments) <key_source>: KEY_FILE added.
	* crypto_box.h (struct arguments) <key_file>: Added.
	* crypto_box.h (get_key_from_file): Declared.
	* crypto_box.c (options[]): Option -k/--key-file added.
	* crypto_box.c (parse_options) <case 'k'>: Added.
	* crypto_box.c (get_key) <case KEY_FILE>: Added.
	* crypto_box.c (get_key_from_file): Defined.

Wed Jun 25 2015  Patrik Wenger  <paddor@gmail.com>

	* crypto_box.h: Include "config.h" and <argp.h>.
	* crypto_box.h crypto_box.c seal_box.c open_box.c: Switch to ARGP for
	command line arguments processing. Now we have long options and stuff
	like --help and --version for free!

Wed Jun 24 2015  Patrik Wenger  <paddor@gmail.com>

	* crypto_box.c crypto_box.h: Refactor.
	* seal_box.c open_box.c: New file names (were: crypto_box.c,
	crypto_open.c).
